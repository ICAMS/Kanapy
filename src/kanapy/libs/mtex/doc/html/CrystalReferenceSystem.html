
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <title>The Crystal Reference System ( Toolbox)
         
      </title>
      <!-- DOCNAME:  Toolbox -->
      <meta name="chunktype" content="refpage">
      <!-- CHUNKNAME: CrystalReferenceSystem -->
      <!-- HEADSTUFF: CrystalReferenceSystem -->
      <!-- HEADSTUFF -->
      <meta name="refentity" content="method:CrystalReferenceSystem">
      <meta http-equiv="Content-Script-Type" content="text/javascript">
      <meta name="toctype" content="fcn">
      <link rel="stylesheet" href="style.css"><script language="JavaScript" src="docscripts.js"></script></head>
   <body><a name="top_of_page"></a><div>
         <table class="nav" summary="Navigation aid" border="0" width="100%" cellpadding="0" cellspacing="0">
            <tr>
               <td valign="baseline"></td>
            </tr>
         </table>
         <p style="font-size:1px;"></p>
      </div>
      <div class="content">
         <h1 class="refname">The Crystal Reference System</h1>
         <div class="subheading"></div>
         <p>Commonly the crystal coordinate system is defined by the crystallographic axes <img src="CrystalReferenceSystem_eq05953740212242508018.png"> , <img src="CrystalReferenceSystem_eq05190905986462978051.png"> , <img src="CrystalReferenceSystem_eq04815523992820898473.png"> , The length <tt>[a,b,c]</tt> and the angles <tt>[alpha,beta,gamma]</tt> between theses axes needs to be specified when defining a variable of type <a href="crystalSymmetry.crystalSymmetry.html">crystalSymmetry</a>.
         </p><pre class="codeinput">cs = crystalSymmetry(<span class="string">'triclinic'</span>,[1,2.2,3.1],[80*degree,85*degree,95*degree])</pre><pre class="codeoutput"> 
cs = crystalSymmetry  
 
  symmetry          : -1           
  elements          : 2            
  a, b, c           : 1, 2.2, 3.1  
  alpha, beta, gamma: 80&deg;, 85&deg;, 95&deg;
  reference frame   : X||a*, Z||c  
 
</pre><h2>Need of a Euclidean reference system<a name="2"> </a></h2>
         <p>However, there are many crystal properties, like orientation or tensorial properties, that are described with respect to an
            Euclidean reference system <img src="CrystalReferenceSystem_eq17037398090405617585.png"> , <img src="CrystalReferenceSystem_eq02133290928880666247.png"> , <img src="CrystalReferenceSystem_eq18351269172824214889.png">  as oposed to the crystallographic axes <img src="CrystalReferenceSystem_eq05953740212242508018.png"> , $\vec b$s, <img src="CrystalReferenceSystem_eq04815523992820898473.png"> . Most importantly, Euler angles describe orientations as subsequent rotations about the <img src="CrystalReferenceSystem_eq18351269172824214889.png"> , <img src="CrystalReferenceSystem_eq17037398090405617585.png">  and <img src="CrystalReferenceSystem_eq18351269172824214889.png">  axis. Hence, we need to inscribe an Eucledian reference system <img src="CrystalReferenceSystem_eq17037398090405617585.png"> , <img src="CrystalReferenceSystem_eq02133290928880666247.png"> , <img src="CrystalReferenceSystem_eq18351269172824214889.png">  into the crystallogaphic reference system <img src="CrystalReferenceSystem_eq05953740212242508018.png"> , <img src="CrystalReferenceSystem_eq05190905986462978051.png"> , <img src="CrystalReferenceSystem_eq04815523992820898473.png"> .
         </p>
         <p>Note, that also the allignment of the crystal axes <img src="CrystalReferenceSystem_eq05953740212242508018.png"> , <img src="CrystalReferenceSystem_eq05190905986462978051.png">  and <img src="CrystalReferenceSystem_eq04815523992820898473.png">  with respect to the atomic lattice, and hence it symmetries, follows different conventions. These are discussed in the section
            <a href="SymmetryAlignment.html">Alignment of the Crystal Axes</a>.
         </p>
         <h2>Cubic, tetragona and orthorhombic symmetries<a name="3"> </a></h2>
         <p>In orthorhombic, tetragonal and cubic crystal symmetry the crystal reference system <img src="CrystalReferenceSystem_eq05953740212242508018.png"> , <img src="CrystalReferenceSystem_eq05190905986462978051.png"> , <img src="CrystalReferenceSystem_eq04815523992820898473.png">  is itsself an Euclidean one and, hence, setting <img src="CrystalReferenceSystem_eq17037398090405617585.png">  parallel to <img src="CrystalReferenceSystem_eq05953740212242508018.png"> , <img src="CrystalReferenceSystem_eq02133290928880666247.png">  parallel to <img src="CrystalReferenceSystem_eq05190905986462978051.png">  and <img src="CrystalReferenceSystem_eq18351269172824214889.png">  parallel to <img src="CrystalReferenceSystem_eq04815523992820898473.png">  is a canonical choice.
         </p>
         <p>As for such symmetries this is also the default in MTEX there is no need to specify the alignment seperately.</p>
         <h2>Trigonal and hexagonal materials<a name="4"> </a></h2>
         <p>For trigonal and hexagonal materials the z axis is commonly aligned with the <img src="CrystalReferenceSystem_eq04815523992820898473.png">  axis. As for the <img src="CrystalReferenceSystem_eq17037398090405617585.png">  and <img src="CrystalReferenceSystem_eq02133290928880666247.png">  axes they are either aligned with the <img src="CrystalReferenceSystem_eq05953740212242508018.png">  or <img src="CrystalReferenceSystem_eq05190905986462978051.png">  axes.
         </p>
         <p>The following command alignes the <img src="CrystalReferenceSystem_eq17037398090405617585.png">  axes to the <img src="CrystalReferenceSystem_eq05953740212242508018.png">  axes and the <img src="CrystalReferenceSystem_eq18351269172824214889.png">  axes to the <img src="CrystalReferenceSystem_eq04815523992820898473.png">  axes.
         </p><pre class="codeinput">cs_x2a = crystalSymmetry(<span class="string">'321'</span>,[1.7,1.7,1.4],<span class="string">'X||a'</span>,<span class="string">'Z||c'</span>);

<span class="comment">% visualize the resuls</span>
plot(cs_x2a,<span class="string">'figSize'</span>,<span class="string">'small'</span>)
annotate(cs_x2a.aAxis,<span class="string">'MarkerFaceColor'</span>,<span class="string">'r'</span>,<span class="string">'label'</span>,<span class="string">'a'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(cs_x2a.bAxis,<span class="string">'MarkerFaceColor'</span>,<span class="string">'r'</span>,<span class="string">'label'</span>,<span class="string">'b'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(-vector3d.Y,<span class="string">'MarkerFaceColor'</span>,<span class="string">'green'</span>,<span class="string">'label'</span>,<span class="string">'-y'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(-vector3d.X,<span class="string">'MarkerFaceColor'</span>,<span class="string">'green'</span>,<span class="string">'label'</span>,<span class="string">'-x'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)</pre><img src="CrystalReferenceSystem_01.png"> <p>In contrast the following command alignes the <img src="CrystalReferenceSystem_eq02133290928880666247.png">  axes to the <img src="CrystalReferenceSystem_eq05953740212242508018.png">  axes and the <img src="CrystalReferenceSystem_eq18351269172824214889.png">  axes to the <img src="CrystalReferenceSystem_eq04815523992820898473.png">  axes.
         </p><pre class="codeinput">cs_y2a = crystalSymmetry(<span class="string">'321'</span>,[1.7,1.7,1.4],<span class="string">'y||a'</span>,<span class="string">'Z||c'</span>);
plot(cs_y2a,<span class="string">'figSize'</span>,<span class="string">'small'</span>)
annotate(cs_y2a.aAxis,<span class="string">'MarkerFaceColor'</span>,<span class="string">'r'</span>,<span class="string">'label'</span>,<span class="string">'a'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(cs_y2a.bAxis,<span class="string">'MarkerFaceColor'</span>,<span class="string">'r'</span>,<span class="string">'label'</span>,<span class="string">'b'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(-vector3d.Y,<span class="string">'MarkerFaceColor'</span>,<span class="string">'green'</span>,<span class="string">'label'</span>,<span class="string">'-y'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(-vector3d.X,<span class="string">'MarkerFaceColor'</span>,<span class="string">'green'</span>,<span class="string">'label'</span>,<span class="string">'-x'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)</pre><img src="CrystalReferenceSystem_02.png"> <p>The only difference between the above two plots is the position of the <img src="CrystalReferenceSystem_eq17037398090405617585.png">  and <img src="CrystalReferenceSystem_eq02133290928880666247.png">  axes. The reason is that visualizations relative to the crystal reference system, e.g., inverse pole figures, are in MTEX
            aligned on the screen according to the b-axis.
         </p>
         <p>This on secreen alignment can be easily modified by</p><pre class="codeinput"><span class="comment">% change on screen alignment</span>
plota2east

<span class="comment">% redo last plot</span>
plot(cs_y2a,<span class="string">'figSize'</span>,<span class="string">'small'</span>)
annotate(cs_y2a.aAxis,<span class="string">'MarkerFaceColor'</span>,<span class="string">'r'</span>,<span class="string">'label'</span>,<span class="string">'a'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(cs_y2a.bAxis,<span class="string">'MarkerFaceColor'</span>,<span class="string">'r'</span>,<span class="string">'label'</span>,<span class="string">'b'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(-vector3d.Y,<span class="string">'MarkerFaceColor'</span>,<span class="string">'green'</span>,<span class="string">'label'</span>,<span class="string">'-y'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
annotate(-vector3d.X,<span class="string">'MarkerFaceColor'</span>,<span class="string">'green'</span>,<span class="string">'label'</span>,<span class="string">'-x'</span>,<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)

<span class="comment">% set old default back</span>
plotb2east</pre><img src="CrystalReferenceSystem_03.png"> <p>It should be stressed that the alignment between the Eucledean crystal axes <img src="CrystalReferenceSystem_eq17037398090405617585.png"> , <img src="CrystalReferenceSystem_eq02133290928880666247.png"> , <img src="CrystalReferenceSystem_eq18351269172824214889.png">  and the crystallographic axes <img src="CrystalReferenceSystem_eq05953740212242508018.png"> , <img src="CrystalReferenceSystem_eq05190905986462978051.png">  and <img src="CrystalReferenceSystem_eq04815523992820898473.png">  is crucial for many computations. The difference between both setups becomes more vsible if we plot crystal shapes in the
            <img src="CrystalReferenceSystem_eq17037398090405617585.png"> , <img src="CrystalReferenceSystem_eq02133290928880666247.png"> , <img src="CrystalReferenceSystem_eq18351269172824214889.png">  coordinate system
         </p><pre class="codeinput">cS_x2a = crystalShape.quartz(cs_x2a);

close <span class="string">all</span>
figure(1)
plot(cS_x2a,<span class="string">'figSize'</span>,<span class="string">'small'</span>)
hold <span class="string">on</span>
arrow3d(0.5*[xvector,yvector,zvector],<span class="string">'labeled'</span>)
hold <span class="string">off</span></pre><img src="CrystalReferenceSystem_04.png"> <pre class="codeinput">cS_y2a = crystalShape.quartz(cs_y2a);

figure(2)
plot(cS_y2a,<span class="string">'figSize'</span>,<span class="string">'small'</span>)
hold <span class="string">on</span>
arrow3d(0.5*[xvector,yvector,zvector],<span class="string">'labeled'</span>)
hold <span class="string">off</span></pre><img src="CrystalReferenceSystem_05.png"> <p>Most important is the difference if Euler angles are used to describe orientation. Lets consider the following two orientations</p><pre class="codeinput">ori_x2a = orientation.byEuler(0,0,0,cs_x2a)
ori_y2a = orientation.byEuler(0,0,0,cs_y2a)</pre><pre class="codeoutput"> 
ori_x2a = orientation (321 -&gt; xyz)
 
  Bunge Euler angles in degree
  phi1  Phi phi2 Inv.
     0    0    0    0
 
 
ori_y2a = orientation (321 -&gt; xyz)
 
  Bunge Euler angles in degree
  phi1  Phi phi2 Inv.
     0    0    0    0
 
</pre><p>and visualize them in a pole figure.</p><pre class="codeinput">newMtexFigure(<span class="string">'innerPlotSpacing'</span>,20,<span class="string">'figSize'</span>,<span class="string">'small'</span>)
plotPDF(ori_x2a,Miller(1,0,0,cs_x2a),<span class="string">'MarkerSize'</span>,20)
annotate([xvector,yvector],<span class="string">'label'</span>,{<span class="string">'x'</span>,<span class="string">'y'</span>},<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)
nextAxis
plotPDF(ori_y2a,Miller(1,0,0,cs_y2a),<span class="string">'MarkerSize'</span>,20)
annotate([xvector,yvector],<span class="string">'label'</span>,{<span class="string">'x'</span>,<span class="string">'y'</span>},<span class="string">'backgroundColor'</span>,<span class="string">'w'</span>)</pre><img src="CrystalReferenceSystem_06.png"> <p>We observe that both pole figures are rotated with respect to each other by 30 degree. Indeed computing the misorientation
            angle between both orientations gives us
         </p><pre class="codeinput">angle(ori_x2a, ori_y2a) ./ degree</pre><pre class="codeoutput"> 
  The involved symmetries have different reference systems
  1: 321, X||b*, Y||a, Z||c
  2: 321, X||a, Y||b*, Z||c*
  I'm going to transform the data from the first one to the second one
 
ans =
   30.0000
</pre><p>In many cases MTEX automatically recognizes different setups and corrects for this. In order to manually transform orientations
            or tensors from one reference frame into another reference frame one might use the command <a href="orientation.transformReferenceFrame.html">transformReferenceFrame</a>. The following command transfroms the reference frame of orientation <tt>ori_y2a</tt> into the reference frame <tt>cs_x2a</tt></p><pre class="codeinput">ori_x2a.transformReferenceFrame(cs_y2a)</pre><pre class="codeoutput"> 
ans = orientation (321 -&gt; xyz)
 
  Bunge Euler angles in degree
  phi1  Phi phi2 Inv.
   270    0    0    0
 
</pre><h2>Triclinic and monoclinic symmetries<a name="13"> </a></h2>
         <p>In triclinic and monoclinic symmetries even more different setups are used. As two perpedicular crystal axes are required
            to align with <img src="CrystalReferenceSystem_eq17037398090405617585.png"> , <img src="CrystalReferenceSystem_eq02133290928880666247.png">  or <img src="CrystalReferenceSystem_eq18351269172824214889.png">  one ussually chooses one crystal axis from the direct coordinate system, i.e., <img src="CrystalReferenceSystem_eq05953740212242508018.png"> , <img src="CrystalReferenceSystem_eq05190905986462978051.png">  or <img src="CrystalReferenceSystem_eq04815523992820898473.png"> , and the second crystal axis from the reciprocal axes <img src="CrystalReferenceSystem_eq15535347897256250382.png"> , <img src="CrystalReferenceSystem_eq14733492820872592391.png">  or <img src="CrystalReferenceSystem_eq12168152070933015719.png"> . Typical examples for such setups are
         </p><pre class="codeinput">cs = crystalSymmetry(<span class="string">'-1'</span>, [8.290 12.966 7.151], [91.18 116.31 90.14]*degree,<span class="keyword">...</span>
  <span class="string">'x||a*'</span>,<span class="string">'y||b'</span>, <span class="string">'mineral'</span>,<span class="string">'An0 Albite 2016'</span>)</pre><pre class="codeoutput"> 
cs = crystalSymmetry  
 
  mineral           : An0 Albite 2016        
  symmetry          : -1                     
  elements          : 2                      
  a, b, c           : 8.3, 13, 7.2           
  alpha, beta, gamma: 91.18&deg;, 116.31&deg;, 90.14&deg;
  reference frame   : X||a*, Y||b            
 
</pre><p>or</p><pre class="codeinput">cs = crystalSymmetry(<span class="string">'-1'</span>, [8.290 12.966 7.151], [91.18 116.31 90.14]*degree,<span class="keyword">...</span>
  <span class="string">'x||a'</span>,<span class="string">'c||c*'</span>, <span class="string">'mineral'</span>,<span class="string">'An0 Albite 2016'</span>)</pre><pre class="codeoutput"> 
cs = crystalSymmetry  
 
  mineral           : An0 Albite 2016        
  symmetry          : -1                     
  elements          : 2                      
  a, b, c           : 8.3, 13, 7.2           
  alpha, beta, gamma: 91.18&deg;, 116.31&deg;, 90.14&deg;
  reference frame   : X||a, Z||c*            
 
</pre><p style="font-size:1px;"></p>
         <table class="footer" border="0" width="100%" cellpadding="0" cellspacing="0">
            <tr>
               <td valign="baseline" align="right"></td>
            </tr>
         </table>
      </div>
   </body>
</html>